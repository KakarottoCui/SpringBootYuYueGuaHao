<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.singulee.carschool.pojo.StudentMapper">
  <resultMap id="BaseResultMap" type="com.singulee.carschool.pojo.Student">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="stuId" jdbcType="INTEGER" property="stuid" />
    <result column="stuName" jdbcType="VARCHAR" property="stuname" />
    <result column="stuPhone" jdbcType="VARCHAR" property="stuphone" />
    <result column="stuPwd" jdbcType="VARCHAR" property="stupwd" />
    <result column="stuStust" jdbcType="VARCHAR" property="stustust" />
    <result column="stuSta" jdbcType="INTEGER" property="stusta" />
    <result column="stuStartDate" jdbcType="DATE" property="stustartdate" />
    <result column="stuEndDate" jdbcType="DATE" property="stuenddate" />
    <result column="teaId" jdbcType="INTEGER" property="teaid" />
    <result column="stuBirth" jdbcType="DATE" property="stubirth" />
    <result column="stuSex" jdbcType="VARCHAR" property="stusex" />
    <result column="stuImg" jdbcType="VARCHAR" property="stuimg" />
    <result column="extend1" jdbcType="VARCHAR" property="extend1" />
    <result column="extend2" jdbcType="VARCHAR" property="extend2" />
  </resultMap>
  <!--通过手机号查找-->
    <select id="selectByPhone" parameterType="java.lang.String" resultType="com.singulee.carschool.pojo.Student">
        select
        *
        from student
        where stuPhone = #{phone} and stuEndDate is null
    </select>
  <!--修改密码-->
  <update id="updatePassword" parameterType="com.singulee.carschool.pojo.Student">
      update student set stuPwd=#{stupwd} where stuPhone=#{stuphone}
  </update>



  <sql id="Base_Column_List">

    stuId, stuName, stuPhone, stuPwd, stuStust, stuSta, stuStartDate, stuEndDate, teaId, 
    stuBirth, stuSex, stuImg, extend1, extend2
  </sql>

  <select id="selectforTeacher" parameterType="java.util.Map" resultType="java.util.Map">
    select
      s.stuId, stuName, stuPhone, stuStust, stuSta, stuStartDate, stuEndDate, teaId,
      stuBirth, stuSex, stuImg
      from student s
    where  s.teaId=#{teacherId}
    <if test="studentname!=null and studentname!=''">
    and stuName like concat('%',#{studentname},'%')
    </if>
    <if test="courseType!=null and courseType!=''">
        and s.stuStust=#{courseType}
    </if>
    <if test="studyLevel!=null and studyLevel!=''">
        <if test="studyLevel==1">
            and s.stuEndDate is null
        </if>
        <if test="studyLevel==0" >
            and s.stuEndDate is not null
        </if>
    </if>
      group by s.stuId
      limit #{from}, #{to}
  </select>

    <select id="selectforTeacherCount" parameterType="java.util.Map" resultType="java.lang.Integer">
        select
        count(*)
        from student s
        where s.teaId=#{teacherId}
        <if test="studentname!=null and studentname!=''">
            and stuName like concat('%',#{studentname},'%')
        </if>
        <if test="courseType!=null and courseType!=''">
            and s.stuStust=#{courseType}
        </if>
        <if test="studyLevel!=null and studyLevel!=''">
            <if test="studyLevel==1">
                and s.stuEndDate is null
            </if>
            <if test="studyLevel==0" >
                and s.stuEndDate is not null
            </if>
        </if>
    </select>


  <!--通过id查看-->
  <select id="selectById" parameterType="java.lang.Integer" resultType="com.singulee.carschool.pojo.Student">
    select stuId,
   stuName, stuPhone, stuPwd, stuStust, stuSta, stuStartDate, stuEndDate, teaId,
    stuBirth, stuSex, stuImg, extend1, extend2
    from student
    where stuId = #{stuid,jdbcType=INTEGER}
  </select>

    <!--多条件查询-->
  <select id="selectStudent" parameterType="map" resultType="Map">
    select stuId, stuName, stuPhone, stuStust, stuSta, stuStartDate, stuEndDate, s.teaId,
    stuBirth, stuSex, stuImg
    from student s
      where 1=1
        <if test="name !=null and name!=''">
           and stuName like concat('%',#{name},'%')
        </if>
        <if test="studentStute !=null and studentStute!=''">
                  and stuStust=#{studentStute}
        </if>

  </select>



  <!--学员添加-->
  <insert id="insert" parameterType="com.singulee.carschool.pojo.Student">

    insert into student (stuId, stuName, stuPhone, 
      stuPwd, stuStust, stuSta, 
      stuStartDate, stuEndDate, teaId, 
      stuBirth, stuSex, stuImg, 
      extend1, extend2)
    values (#{stuid,jdbcType=INTEGER}, #{stuname,jdbcType=VARCHAR}, #{stuphone,jdbcType=VARCHAR}, 
      #{stupwd,jdbcType=VARCHAR}, #{stustust,jdbcType=VARCHAR}, #{stusta,jdbcType=INTEGER}, 
      #{stustartdate,jdbcType=DATE}, #{stuenddate,jdbcType=DATE}, #{teaid,jdbcType=INTEGER}, 
      #{stubirth,jdbcType=DATE}, #{stusex,jdbcType=VARCHAR}, #{stuimg,jdbcType=VARCHAR}, 
      #{extend1,jdbcType=VARCHAR}, #{extend2,jdbcType=VARCHAR})
  </insert>


    <!--判空添加-->
  <update id="updateByPrimaryKeySelective" parameterType="com.singulee.carschool.pojo.Student">
    update student
    <set>
      <if test="stuname != null">
        stuName = #{stuname,jdbcType=VARCHAR},
      </if>
      <if test="stuphone != null">
        stuPhone = #{stuphone,jdbcType=VARCHAR},
      </if>
      <if test="stupwd != null">
        stuPwd = #{stupwd,jdbcType=VARCHAR},
      </if>
      <if test="stustust != null">
        stuStust = #{stustust,jdbcType=VARCHAR},
      </if>
      <if test="stusta != null">
        stuSta = #{stusta,jdbcType=INTEGER},
      </if>
      <if test="stustartdate != null">
        stuStartDate = #{stustartdate,jdbcType=DATE},
      </if>
      <if test="stuenddate != null">
        stuEndDate = #{stuenddate,jdbcType=DATE},
      </if>
      <if test="teaid != null">
        teaId = #{teaid,jdbcType=INTEGER},
      </if>
      <if test="stubirth != null">
        stuBirth = #{stubirth,jdbcType=DATE},
      </if>
      <if test="stusex != null">
        stuSex = #{stusex,jdbcType=VARCHAR},
      </if>
      <if test="stuimg != null">
        stuImg = #{stuimg,jdbcType=VARCHAR},
      </if>
      <if test="extend1 != null">
        extend1 = #{extend1,jdbcType=VARCHAR},
      </if>
      <if test="extend2 != null">
        extend2 = #{extend2,jdbcType=VARCHAR},
      </if>
    </set>
    where stuId = #{stuid,jdbcType=INTEGER}
  </update>


  <update id="update" parameterType="com.singulee.carschool.pojo.Student">

    update student
    set stuName = #{stuname,jdbcType=VARCHAR},
      stuPhone = #{stuphone,jdbcType=VARCHAR},
      stuPwd = #{stupwd,jdbcType=VARCHAR},
      stuStust = #{stustust,jdbcType=VARCHAR},
      stuSta = #{stusta,jdbcType=INTEGER},
      stuStartDate = #{stustartdate,jdbcType=DATE},
      stuEndDate = #{stuenddate,jdbcType=DATE},
      teaId = #{teaid,jdbcType=INTEGER},
      stuBirth = #{stubirth,jdbcType=DATE},
      stuSex = #{stusex,jdbcType=VARCHAR},
      stuImg = #{stuimg,jdbcType=VARCHAR},
      extend1 = #{extend1,jdbcType=VARCHAR},
      extend2 = #{extend2,jdbcType=VARCHAR}
    where stuId = #{stuid,jdbcType=INTEGER}
  </update>
</mapper>